!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);let o=null;class r{constructor(e){this.ssp=e,this.viewport=e.viewport,o=e.viewport.THREE,this.weather={scene:null,camera:null},this._initWeather()}createWaves(e={}){let t=0;const{xAxisCount:n=500,yAxisCount:r=500,separation:i=60,scale:a=10,maxFluctua:s=1,position:c={x:0,y:0,z:0},color:l="#ffffff"}=e,A=n*r,f=new Float32Array(3*A),d=new Float32Array(A);let u=0,v=0;for(let e=0;e<n;e++)for(let t=0;t<r;t++)f[u]=e*i-n*i/2,f[u+1]=0,f[u+2]=t*i-r*i/2,d[v]=1,u+=3,v++;const h=new o.BufferGeometry;h.setAttribute("position",new o.BufferAttribute(f,3)),h.setAttribute("scale",new o.BufferAttribute(d,1));const g=new o.ShaderMaterial({transparent:!0,uniforms:{color:{value:new o.Color(l)},showD:{value:500}},vertexShader:"\n    attribute float scale;\n    uniform float showD;\n    varying  float dcolor;\n    void main() {\n\n      vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n    \n      //gl_PointSize = 5.0;\n      float fDistance =sqrt( position.x*position.x+position.z*position.z);\n      if(fDistance < showD)\n      return;\n\n      dcolor = fDistance/355.0/3.0;\n      gl_Position = projectionMatrix * mvPosition;\n      gl_PointSize = scale * ( 300.0 / - mvPosition.z );\n    }\n    ",fragmentShader:"\n    uniform vec3 color;\n    varying  float dcolor;\n    void main() {\n\n      //if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 ) discard;\n      int buffer = int(dcolor);\n       \n      //gl_FragColor = vec4( dcolor,sin(dcolor),0, 1.0 );\n      gl_FragColor = vec4( color, 1.0 );\n\n    }\n    "});g.uniforms.color={value:new o.Color(l)};const m=new o.Points(h,g);m.position.set(c.x,c.y,c.z),m.update=function(){const e=m.geometry.attributes.position.array,o=m.geometry.attributes.scale.array;let i=0,c=0;const l=Math.sqrt(n/2*(n/2)+r/2*(r/2));for(let A=0;A<n;A++)for(let f=0;f<r;f++){let d=A-n/2,u=f-r/2,v=Math.sqrt(d*d+u*u);e[i+1]=50*Math.cos(1*(v/l*50-t))*s,o[c]=a,i+=3,c++}m.geometry.attributes.position.needsUpdate=!0,m.geometry.attributes.scale.needsUpdate=!0,t+=.01};const p=this.ssp.manager.effectManager;p.effectObjects.push(m),this.ssp.addObject(m,p.scene)}createBuilds(e={}){const{buildWidth:t=70,buildDepth:n=70,buildHeigh:r=130,ItemCount:i=30,gapX:a=4,gapY:s=4,boxShowDistance:c=1114,randShift:l=.5,position:A={x:0,y:0,z:0},color:f="#ffffff"}=e;for(let e=0;e<i;e++)for(let v=0;v<i;v++){const h=(e-i/2)*t*a+(Math.random()-1)*l*t*a,g=(v-i/2)*n*s+(Math.random()-1)*l*n*s;if(Math.sqrt(h*h+g*g)<c)continue;const m=Math.floor(Math.random()*r)+r;var d=new o.BoxGeometry(t,m,n,1,20,1);d.translate(h,m/2,g),d.computeBoundingBox();const p=new Float32Array(2);p[0]=d.boundingBox.min.y,p[1]=d.boundingBox.max.y;const y="\n          uniform vec2 lowHeigh;\n          varying float ratioHeigh;\n          void main() {\n    \n            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n             float maxHeigh = lowHeigh.y - lowHeigh.x;\t\n             float curHeigh = lowHeigh.y - position.y;\t\n             ratioHeigh = curHeigh/maxHeigh;\n            gl_Position = projectionMatrix * mvPosition;\n    \n          }\n          ",w="\n          uniform vec3 color;\n          varying float ratioHeigh;\n          void main() {\n    \n            gl_FragColor = vec4( color, 1.0-ratioHeigh*ratioHeigh*ratioHeigh-0.5 );\n        \n    \n          }\n          ",b=new o.ShaderMaterial({transparent:!0,uniforms:{color:{value:new o.Color(f)},lowHeigh:{value:new o.Vector2(p[0],p[1])}},vertexShader:y,fragmentShader:w});b.uniforms.color={value:new o.Color(f)};var u=new o.Mesh(d,b);u.position.set(A.x,A.y,A.z),this.ssp.addObject(u,this.ssp.manager.getScene("effect"))}}animate(){requestAnimationFrame(()=>{this.animate()}),this.weather.scene.children.forEach(e=>{const{vertices:t}=e.geometry;t.forEach((function(e){e.y=e.y-e.velocityY,e.x=e.x-e.velocityX,e.y<=0&&(e.y=60),(e.x<=-20||e.x>=20)&&(e.velocityX=-1*e.velocityX)})),e.geometry.verticesNeedUpdate=!0}),this.viewport.renderer.render(this.weather.scene,this.weather.camera)}_initWeather(){this.weather.scene=new o.Scene;const e=new o.PerspectiveCamera(45,this.viewport.rendererManager.getWidth()/this.viewport.rendererManager.getHeight(),.1,1e4);e.position.set(30,0,80),e.lookAt(new o.Vector3(0,0,0)),this.weather.camera=e,this.animate()}initSunny(){this.weather.scene.clear()}initRainy(){this.weather.scene.clear();const e=(new o.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAASQSURBVHjarFfPb1RVFP7Oufe9Nz86zLSlI2DjD4xYYyFGY7QJiQu60ITEENlhIgs2hIoLjewb3bvgH8DEuDAEY1y4IKwMRYmAhGAULZGGinSmM5158+bN+3GPi04rbaf0tvUkMy95uffc73znO+fcRyKC1Tb5fYqNzNOMW/f9N6q1Ogad4EpiaMM9X32wb8073WuhbOwLfmxwr6lPLQSZZKiMKwWHIdi89QRg9OMRaAZuz0Tv3Hyg3gOV5IWsXBh5yv02Tv8nAI1OtO4GIiBJMXTzPj4lYgBC1+6Zz3YVwynNmHs8Cxk7ALON9roumAzu/KPPVFq5Ua0Xj6u01Ojl6eDM8+XkYyO8fQB+M9Nzu2Lg4UJzbKZZmFAMEGj5/b1adkJFC+ef6M9NGbPNFGQyazVAIIgxuhbmJqNEeS4LlgpIERAl7NWi7OSwI2+DObFVZE8AT+5x1y5UhLuz0UQlUONaYYV/6QqzErjjqZNOPLvH/TxJZesAdmbWHv7r783dP911P4RSoB7hEQBhxvXp9KOi8b9+bm/hfmoBoqdi0lRW/GAMHrbVmUZHPePQ+k5dNqgGzvDfTf0JGbPWjy0DP9zyV6GkV3+rZo97mpA+EjFWpSEFwWPg9pzzPn5pfZFCfl6x6M2iHYB6S1bUfb2jT7ZiFBURIL0joW4LJSYEkRSna3yymI1PmA3aak8AYTtZPlxIXm4k+WNMAEE2FDdBwAzUY++YQ+FZEtyQzWog7xLyLiGrgSB2TxvhDIisKku6yEU4047d0zkN9DmEPofsGdj3dAGKgXpgXpn5i4/CrM35Y1mQxUy1TebocNk9uyPH11KzCQbIRKC0g0YrOd5JucC0+TnHJOikXKi3kuOcdsAmsgcQhAnm/aT8R4WOMBG2aqwIf1b5SN1PymGY2ANoE8q1WB0OjDusyGwdAAxaxhmej9XhNqNsDaA6L/vnFmh8cdhsnQECAcJ4sEDjD6tmvzWAWosOtiJ1AETAlu45/9UEERBEfKDW4oP2IvScMVFqpFtT2JaJQJQeIc8ds78RhV7JQBSRQCDLc3/z8QNEgjhl1TCqZM2A55iU6ZE8bkcDICgCMtqk9p2Qgjua4orZLv0ADAiakkqe23esARTdzsWcSm7AALJdEEaQ0/GNkhtetNbAUF94yXGoONfJjy8NmM0AkaULSvcbY09f55uSF16yZkDlB2YH+71zu/LB9dgsFYKxmIXoQjUABHFK2J0Pr/cPZM9R385ZawYGyYdW4qtBPlUNvO9iowYcy45I3f9EGJ5K50eHWqeGHOMvfrrl7RjQZMAwKHhqaqRYPZFXUTMWXk7D0r1gZZ+U5fhTYeQ5ar5UrJzYkaEphoFeJwBeL4cCIBGg5EQXXuxfOJRT7csCgQjBdLcJAENLT4YRggiQ5fbl0YHGoZITX0iElv1Zp2BlIyMAdHWn135rwKm/e9cvHAvhvgbhHQZMEAJTKkSmkVHR1b15/8t67J4XoaZN0rSNort0N0s6PJdj91K/8l8v5PTYdDA4AAL25urzfiueaqfujyUnnKnHrthOkH8HAIl7DGQhmnDgAAAAAElFTkSuQmCC"),t=new o.PointsMaterial({size:2,transparent:!0,opacity:.5,map:e,blending:o.AdditiveBlending,sizeAttenuation:!0,depthTest:!1}),n=new o.Geometry;for(let e=0;e<500;e++){const e=new o.Vector3(100*Math.random()-50,100*Math.random()*1.5,100*Math.random()-50);e.velocityY=.5+Math.random()/10,e.velocityX=0,n.vertices.push(e)}n.center();const r=new o.Points(n,t);r.position.y=-30,this.weather.scene.add(r)}initSnow(){this.weather.scene.clear();const e=(new o.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACW1BMVEUAAAD///8CAgIPDw8BAQF1dXVsbGwLCwujo6NeXl43NzesrKzPz8+EhIQSEhIDAwNpaWnFxcXo6OhbW1vf398VFRU/Pz+YmJiXl5e7u7uUlJTi4uI2Njbn5+ccHBzQ0NApKSkwMDBSUlKDg4MeHh65ubmlpaVQUFB/f3+dnZ04ODgFBQUICAgtLS1XV1eqqqpRUVHd3d2Li4tOTk6GhobZ2dn8/Pz9/f14eHhaWlq3t7cHBweoqKgMDAzX19c7OztfX19FRUW+vr7s7OwvLy8KCgohISF5eXnU1NR6enqRkZF2dnbAwMB9fX1jY2Ourq6Ojo7g4OAQEBD09PSwsLANDQ0ZGRnIyMjS0tK4uLhdXV1KSkrl5eVnZ2fW1tZvb29NTU2FhYXw8PBUVFQUFBRAQEAuLi49PT3z8/PHx8cRERGnp6fExMTY2Nj39/cjIyNGRkbMzMxcXFyBgYGenp68vLyQkJC0tLQrKysJCQkbGxsODg5gYGCampp7e3s6Ojr5+fnOzs6/v78XFxdPT0/GxsampqbT09MgICAGBga2trYlJSU5OTm1tbWkpKQyMjKgoKDKyspwcHAkJCQYGBiSkpIAAAABAQERERE4ODhZWVkbGxtycnJlZWVTU1MUFBRISEiAgIBEREShoaEzMzNqamqXl5cmJibBwcHFxcWOjo5NTU0WFhYJCQkxMTGWlpYtLS2ZmZkvLy80NDSHh4fd3d1oaGgCAgILCwtUVFSUlJTDw8NiYmJYWFjGxsY7OzvExMRKSkoTExOKioqQkJCwsLC1tbU9PT3m5uZ5kJL/AAAAlnRSTlP+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v6TC5kUAAAB5klEQVR4XqWTU5MkURSE81ZV0zbGto21bdu2bfP0GEvbNn7WRk/09lRXd0w/7PeQFRmnHu7NmwcACGEIkPrIl/okjk8MESikFFIQST3EcBgIxXA1FDwHKIYCECCC+jRvhJaaZgH6ss8w5ogG9O/UzebWgut56NS2VDNd+BYiJQUyfg27W4THqa8b0idRMDJCWGVjk15ukm/JzVK9HaQqyYEgzWHIGH9jXYYDKeWDK4qVPGKZnW3xsSqoKxdp5dKgOHr29KbRd2v0nfvUMeU20NL27kl0UGkjR3lcQGaqTGkDxrnSx6f1h0Gon0aECRNvQGauuAryTi588DApeWrkNRdMn2Ga6QiwL845c0vmzb9XzEwLNR7r4sgPS+xLS5ctX7Hy0Srl6jVr5S/WmauK1m+Q+8V96P5YtlFNcDOWBdpcbpP0QUC+M9sOzqhJ2boN4LfXuHdE9yFIRLa695Xf6fefzPadu7p6rxEX3Yfde/aqAmwf9rMD1oM8wBkgRkD1ofzDJnYEyqPWY8fdQEwfTpysdz4/ZYHrtOyV13Mmpg9BMjh0b8724NyH85+SS71x+nDhouGr5hsu/cBPXchL+8AX2tFq4cBfRlvNFYQHImp5ILdWEADoC/SIC/efixOfxMubcP3/Anriqm2DBhxnAAAAAElFTkSuQmCC"),t=new o.PointsMaterial({size:2,transparent:!0,opacity:.9,map:e,blending:o.AdditiveBlending,sizeAttenuation:!0,depthTest:!1}),n=new o.Geometry;for(let e=0;e<1500;e++){const e=new o.Vector3(100*Math.random()-50,100*Math.random()*1.5,100*Math.random()-50);e.velocityY=.1+Math.random()/10,e.velocityX=(Math.random()-.5)/2,n.vertices.push(e)}n.center();const r=new o.Points(n,t);r.position.y=-30,this.weather.scene.add(r)}}window.sceneEffect=r,t.default=r}])}));